const glob=require("glob"),puppeteer=require("puppeteer"),fs=require("fs"),path=require("path");async function wait(t){return new Promise(e=>{setTimeout(e,t)})}async function snapshot(t,e){let a=path.basename(e,".js"),o=fs.readFileSync(e,"utf-8"),i=await t.newPage();await i.evaluateOnNewDocument(o),await i.setViewport({width:1200,height:1200});try{await i.goto("http://localhost/echarts/theme/tool/thumb.html#"+a),await wait(200),await i.screenshot({path:__dirname+"/../thumb/"+a+".png"})}catch(t){console.log(t)}await i.close(),console.log("Updated "+a)}glob("../*.js",async function(t,e){let a=await puppeteer.launch();for(let t of e)try{await snapshot(a,t)}catch(t){console.log(t)}await a.close()});